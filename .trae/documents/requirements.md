# 全栈个人博客系统需求规格说明书

## 1. 项目概述
本项目旨在构建一个**现代化、高性能、全栈式**的个人博客系统。系统采用前后端分离架构，前端基于 **Next.js 14** 打造炫酷、响应式的用户界面，后端基于 **Nest.js** 提供稳定、规范的 RESTful API。项目遵循高效的工程化实践，具备完整的 CI/CD 流水线，支持一键自动化部署。

## 2. 技术栈定义
| 层级 | 技术选型 | 说明 |
| :--- | :--- | :--- |
| **前端** | Next.js 14 (App Router), TypeScript, Tailwind CSS, Framer Motion | 服务端渲染(SSR/SSG)，类型安全，原子化CSS，平滑动画 |
| **UI框架** | shadcn/ui + 自定义组件 | 基于 Tailwind，提供高质量、可访问的组件库，支持个性化定制 |
| **后端** | Nest.js, TypeScript, Prisma ORM | 企业级 Node.js 框架，类型安全的数据库操作 |
| **数据库** | PostgreSQL (主数据库), Redis (缓存/会话) | 关系型数据存储，高性能缓存层 |
| **部署** | Vercel (前端), Railway/Render (后端), GitHub Actions (CI/CD) | 平台优化，自动化流水线 |

## 3. 功能需求详述

### 3.1 用户角色与核心用例
| 角色 | 核心权限与用例 |
| :--- | :--- |
| **访客** | 浏览首页、文章列表与详情；按分类/标签/关键词筛选文章；阅读“关于我”页面；查看友链。 |
| **博主(管理员)** | **文章全生命周期管理**（增删改查，支持Markdown编辑与实时预览）；**内容管理**（分类/标签管理）；**互动管理**（评论审核、回复）；**系统监控**（数据仪表盘）。 |

### 3.2 前端非功能性UI/UX需求
*   **视觉与交互**：
    *   **主题系统**：支持明暗主题切换，且主题偏好能被本地存储记忆。
    *   **动画效果**：页面切换（Route Transition）、数据加载（Skeleton Screen）、交互反馈（如按钮点击）等需使用 Framer Motion 或类似库实现平滑、不突兀的动画。
    *   **响应式设计**：必须完美适配从移动端到桌面端的各种屏幕尺寸。
*   **编辑器体验**：文章编辑页面需提供**左右分屏**的 Markdown 编辑器，左侧为编辑区，右侧为**实时预览**区，并支持语法高亮 。
*   **性能指标**：需关注并优化 Core Web Vitals（LCP, FID, CLS），确保页面加载速度快，交互流畅。

### 3.3 后端API与数据管理需求
*   **API设计**：严格遵循 **RESTful** 规范。资源命名使用复数，正确运用 HTTP 方法（GET, POST, PUT, DELETE）和状态码 。
*   **数据验证与序列化**：使用 Nest.js 的 `class-validator` 和 `class-transformer` 确保接口输入输出的安全与整洁。
*   **认证与授权**：采用 **JWT** 无状态认证机制。后端应设计完整的注册/登录接口，并对管理员操作进行权限拦截 。

## 4. 开发、测试与部署流程

### 4.1 开发与代码管理
*   **版本控制**：代码托管于 **GitHub** 仓库，遵循类似 `Git Flow` 的分支策略（如 `main`, `develop`, `feature/*` 分支）。
*   **环境配置**：项目需提供完善的配置文件（如 `.env.example`），区分开发、测试、生产环境。

### 4.2 自动化CI/CD流水线
使用 **GitHub Actions** 实现自动化流程 ：
1.  **触发条件**：当代码推送至 `main` 或 `develop` 分支时自动触发。
2.  **流水线任务**：
    *   **依赖安装与缓存**
    *   **自动化测试**：运行单元测试和E2E测试。
    *   **代码质量检查**：可集成 ESLint, Prettier 等。
    *   **构建阶段**：分别构建前端和后端项目。
    *   **自动部署**：构建成功后，自动部署到 Vercel（前端）和 Railway（后端）。

### 4.3 测试策略
*   **测试要求**：整体测试覆盖率应 > 80%。
*   **前端测试**：使用 **Jest** 和 **React Testing Library** 进行组件单元测试。
*   **后端测试**：使用 **Jest** 和 **Supertest** 进行服务单元测试和 API 集成测试 。

## 5. 部署架构与演进路径

### 5.1 初期免费部署方案
*   **前端**：部署于 **Vercel**。因其与 Next.js 深度集成，提供全球 CDN 和自动化 HTTPS，访问速度极快且免费额度充足 。
*   **后端与数据库**：后端应用可部署于 **Railway** 或 **Render**。PostgreSQL 和 Redis 可使用云服务商（如 Supabase, PlanetScale, Railway 自带）的免费套餐。

### 5.2 后期容器化与迁移路径
*   **容器化**：为未来迁移至自建服务器（如 VPS）做准备，项目后期应提供 `Dockerfile` 和 `docker-compose.yml` 文件，将前后端应用容器化。
*   **无缝迁移**：需编写详细的《服务器迁移文档》，说明环境变量配置、数据库初始化、域名绑定和反向代理（Nginx）设置等步骤，确保迁移过程平滑。

## 6. 文档交付物
1.  **项目 README.md**：包含项目介绍、快速开始指南、环境配置、脚本说明等。
2.  **API 接口文档**：使用 Nest.js 的 **Swagger** 模块自动生成可交互的 API 文档。
3.  **开发环境配置指南**：详细记录从零开始搭建开发环境的每一步。

---

### 核心功能清单表格

| 模块 | 核心功能点 | 关键要求/备注 |
| :--- | :--- | :--- |
| **🔐 身份认证** | 管理员注册/登录 | 密码加密（BCrypt），JWT令牌 |
| **📝 文章管理** | 增、删、改、查、发布/草稿 | 核心功能，支持Markdown实时预览 |
| **🏷️ 内容组织** | 分类管理、标签管理 | 支持文章按分类和标签进行筛选 |
| **💬 评论系统** | 发表评论、评论审核、回复 | 前端提交，后端审核后显示 |
| **🎨 前端UI** | 响应式布局、明暗主题、页面过渡动画 | 使用Tailwind CSS和Framer Motion等实现 |
| **⚙️ 后台管理** | 统一的数据仪表盘和操作界面 | 集中管理文章、分类、评论等 |
| **🔍 内容发现** | 全局搜索、分类/标签筛选、文章分页 | 搜索可基于数据库模糊查询，后期可扩展Elasticsearch |
| **🚀 CI/CD** | 代码提交后自动测试、构建、部署 | 使用GitHub Actions实现自动化 |
